syntax = "proto3";

package haskcore.buildsystem;

option java_package = "io.github.numq.haskcore.buildsystem";
option java_multiple_files = true;

message BuildCommand {
  string path = 1;
  repeated string full_command = 2;

  oneof command_type {
    StackCommand stack = 3;
    CabalCommand cabal = 4;
    GhcCommand ghc = 5;
    RunHaskellCommand run_haskell = 6;
    CustomCommand custom = 7;
  }
}

message StackCommand {
  oneof stack_command_type {
    StackBuild build = 1;
    StackTest test = 2;
    StackRun run = 3;
    StackClean clean = 4;
    StackCustom custom = 5;
  }
}

message CabalCommand {
  oneof cabal_command_type {
    CabalBuild build = 1;
    CabalTest test = 2;
    CabalRun run = 3;
    CabalClean clean = 4;
    CabalCustom custom = 5;
  }
}

message GhcCommand {
  oneof ghc_command_type {
    GhcCompile compile = 1;
    GhcRun run = 2;
    GhcCustom custom = 3;
  }
}

message RunHaskellCommand {
  oneof run_haskell_command_type {
    RunHaskellRun run = 1;
    RunHaskellCustom custom = 2;
  }
}

message StackBuild {
  string path = 1;
}

message StackTest {
  string path = 1;
}

message StackRun {
  string path = 1;
}

message StackClean {
  string path = 1;
}

message StackCustom {
  string path = 1;
  repeated string full_command = 2;
}

message CabalBuild {
  string path = 1;
}

message CabalTest {
  string path = 1;
}

message CabalRun {
  string path = 1;
}

message CabalClean {
  string path = 1;
}

message CabalCustom {
  string path = 1;
  repeated string full_command = 2;
}

message GhcCompile {
  string path = 1;
}

message GhcRun {
  string path = 1;
}

message GhcCustom {
  string path = 1;
  repeated string full_command = 2;
}

message RunHaskellRun {
  string path = 1;
}

message RunHaskellCustom {
  string path = 1;
  repeated string full_command = 2;
}

message CustomCommand {
  string path = 1;
  repeated string full_command = 2;
}